@{
    var expenses = (List<RealEstateCRM.Models.Entities.Expense>)ViewBag.Expenses;
    var categoryNames = new Dictionary<int, string> { {0, "Офис"}, {1, "Маркетинг"}, {2, "Комунални"}, {3, "Бонус"}, {4, "Други"} };
    var isAdmin = (bool)ViewBag.IsAdmin;
}

<table style="width:100%;border-collapse:collapse">
  <thead>
    <tr style="border-bottom:2px solid #000">
      <th style="padding:8px;text-align:left">Дата</th>
      <th style="padding:8px;text-align:left">Категория</th>
      <th style="padding:8px;text-align:left">Описание</th>
      <th style="padding:8px;text-align:right">Сума</th>
      @if (isAdmin)
      {
        <th style="padding:8px;text-align:center">Действие</th>
      }
    </tr>
  </thead>
  <tbody>
    @if (!expenses.Any())
    {
      <tr>
        <td colspan="@(isAdmin ? 5 : 4)" style="padding:20px;text-align:center;color:#999">Няма разходи за периода</td>
      </tr>
    }
    else
    {
      @foreach (var e in expenses.OrderByDescending(x => x.CreatedAtUtc))
      {
        <tr style="border-bottom:1px solid #e5e5e5">
          <td style="padding:8px">@e.CreatedAtUtc.ToString("dd.MM.yyyy")</td>
          <td style="padding:8px">@categoryNames.GetValueOrDefault((int)e.Category, e.Category.ToString())</td>
          <td style="padding:8px">@e.Description</td>
          <td style="padding:8px;text-align:right;font-weight:600">@e.Amount.ToString("F2")</td>
          @if (isAdmin)
          {
            <td style="padding:8px;text-align:center">
              <button type="button" onclick="deleteExpense('@e.Id')" class="btn secondary" style="padding:4px 8px;font-size:12px">Изтрий</button>
            </td>
          }
        </tr>
      }
    }
  </tbody>
</table>
