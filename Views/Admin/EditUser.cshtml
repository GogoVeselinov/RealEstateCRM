@model RealEstateCRM.Models.ViewModels.UserFormViewModel

@{
    ViewData["Title"] = "Редактиране на потребител";
}

<div class="wrap" style="max-width: 600px;">
    <h2>Редактиране на потребител</h2>
    
    <form asp-action="EditUser" method="post" style="margin-top: 24px;">
        <input type="hidden" asp-for="Id" />
        <div asp-validation-summary="All" style="padding: 12px; margin-bottom: 16px; background: #fee; border: 1px solid #c00; color: #c00;"></div>

        <div style="margin-bottom: 16px;">
            <label asp-for="Email" style="display: block; margin-bottom: 4px;">Имейл</label>
            <input asp-for="Email" style="width: 100%; padding: 8px; border: 1px solid #000;" />
            <span asp-validation-for="Email" style="color: #c00;"></span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
            <div>
                <label asp-for="FirstName" style="display: block; margin-bottom: 4px;">Име</label>
                <input asp-for="FirstName" style="width: 100%; padding: 8px; border: 1px solid #000;" />
                <span asp-validation-for="FirstName" style="color: #c00;"></span>
            </div>
            <div>
                <label asp-for="LastName" style="display: block; margin-bottom: 4px;">Фамилия</label>
                <input asp-for="LastName" style="width: 100%; padding: 8px; border: 1px solid #000;" />
                <span asp-validation-for="LastName" style="color: #c00;"></span>
            </div>
        </div>

        <div style="margin-bottom: 16px;">
            <label asp-for="Password" style="display: block; margin-bottom: 4px;">Парола</label>
            <input asp-for="Password" type="password" style="width: 100%; padding: 8px; border: 1px solid #000;" />
            <span asp-validation-for="Password" style="color: #c00;"></span>
            <small style="color: #666;">Оставете празно, за да запазите текущата парола</small>
        </div>

        <div style="margin-bottom: 16px;">
            <label asp-for="ConfirmPassword" style="display: block; margin-bottom: 4px;">Потвърди парола</label>
            <input asp-for="ConfirmPassword" type="password" style="width: 100%; padding: 8px; border: 1px solid #000;" />
            <span asp-validation-for="ConfirmPassword" style="color: #c00;"></span>
        </div>

        <div style="margin-bottom: 24px;">
            <label asp-for="SelectedRole" style="display: block; margin-bottom: 4px;">Роля</label>
            <select asp-for="SelectedRole" style="width: 100%; padding: 8px; border: 1px solid #000;">
                <option value="">-- Изберете роля --</option>
                @foreach (var role in Model.AvailableRoles)
                {
                    <option value="@role">@role</option>
                }
            </select>
            <span asp-validation-for="SelectedRole" style="color: #c00;"></span>
        </div>

        <div style="text-align: right;">
            <a asp-action="Index" class="btn secondary" style="margin-right: 8px;">Отказ</a>
            <button type="submit" class="btn">Запази</button>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
