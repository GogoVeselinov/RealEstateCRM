@model List<RealEstateCRM.Models.Entities.VisitPayment>

@{
    var typeNames = new Dictionary<int, string> { {0, "–¢–∞–∫—Å–∞ –ü—Ä–µ–≥–ª–µ–¥"}, {1, "–ö–æ–º–∏—Å–∏–æ–Ω"}, {2, "–î–µ–ø–æ–∑–∏—Ç"}, {3, "–î—Ä—É–≥–∏"} };
    var methodNames = new Dictionary<int, string> { {0, "–ü–∞—Ä–∏"}, {1, "–ë–∞–Ω–∫–æ–≤ –¢—Ä–∞–Ω—Å—Ñ–µ—Ä"}, {2, "POS"}, {3, "–î—Ä—É–≥–∏"} };
}

<table style="width:100%;border-collapse:collapse">
  <thead>
    <tr style="border-bottom:2px solid #000">
      <th style="padding:8px;text-align:left">–î–∞—Ç–∞</th>
      <th style="padding:8px;text-align:left">–¢–∏–ø</th>
      <th style="padding:8px;text-align:left">–ú–µ—Ç–æ–¥</th>
      <th style="padding:8px;text-align:right">–°—É–º–∞</th>
      <th style="padding:8px;text-align:left">–ë–µ–ª–µ–∂–∫–∏</th>
      <th style="padding:8px;text-align:center">–î–æ–∫—É–º–µ–Ω—Ç</th>
      <th style="padding:8px;text-align:center">–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
  </thead>
  <tbody>
    @if (!Model.Any())
    {
      <tr>
        <td colspan="7" style="padding:20px;text-align:center;color:#999">–ù—è–º–∞ –ø–ª–∞—â–∞–Ω–∏—è</td>
      </tr>
    }
    else
    {
      @foreach (var p in Model)
      {
        <tr style="border-bottom:1px solid #e5e5e5">
          <td style="padding:8px">@p.CreatedAtUtc.ToString("dd.MM.yyyy HH:mm")</td>
          <td style="padding:8px">@typeNames.GetValueOrDefault((int)p.PaymentType, p.PaymentType.ToString())</td>
          <td style="padding:8px">@methodNames.GetValueOrDefault((int)p.PaymentMethod, p.PaymentMethod.ToString())</td>
          <td style="padding:8px;text-align:right;font-weight:600">@p.Amount.ToString("F2")</td>
          <td style="padding:8px">@(string.IsNullOrWhiteSpace(p.Notes) ? "-" : p.Notes)</td>
          <td style="padding:8px;text-align:center">
            @if (!string.IsNullOrWhiteSpace(p.FilePath))
            {
              <a href="@p.FilePath" target="_blank" style="color:#000;text-decoration:underline">üìÑ</a>
            }
            else
            {
              <span style="color:#999">-</span>
            }
          </td>
          <td style="padding:8px;text-align:center">
            <button type="button" onclick="deletePayment('@p.Id')" class="btn secondary" style="padding:4px 8px;font-size:12px">–ò–∑—Ç—Ä–∏–π</button>
          </td>
        </tr>
      }
    }
  </tbody>
</table>
